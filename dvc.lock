schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/cnnClassifier/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 5f8547caf2112f616b4069186d9c87da
      size: 995
    - path: src/cnnClassifier/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: eee6d2843ab3b8cde01bcec7d7345c8b
      size: 888
    outs:
    - path: artifacts/data_ingestion/genres_original
      hash: md5
      md5: 3670f1ac52ea40d81e25b99d7dde6548.dir
      size: 1322781424
      nfiles: 999
  prepare_data:
    cmd: python src/cnnClassifier/pipeline/stage_02_prepare_data.py
    deps:
    - path: artifacts/data_ingestion/genres_original
      hash: md5
      md5: 3670f1ac52ea40d81e25b99d7dde6548.dir
      size: 1322781424
      nfiles: 999
    - path: config/config.yaml
      hash: md5
      md5: 5f8547caf2112f616b4069186d9c87da
      size: 995
    - path: src/cnnClassifier/pipeline/stage_02_prepare_data.py
      hash: md5
      md5: 22753c381d723bca70c06d94b0404b59
      size: 1034
    outs:
    - path: artifacts/prepare_data/mfcc_5sec_chunks.json
      hash: md5
      md5: 51d3899ee3b094163aa362c46cf0ee5a
      size: 239470161
    - path: artifacts/prepare_data/test_data.json
      hash: md5
      md5: f7dacf7dcfe734fbad8a13927d8464fb
      size: 35931752
    - path: artifacts/prepare_data/train_data.json
      hash: md5
      md5: 8aca6d80038a78ae306fdcda86f46492
      size: 162804174
    - path: artifacts/prepare_data/val_data.json
      hash: md5
      md5: 7f86b0c558d92359639ce2569090a626
      size: 40730053
  prepare_base_model:
    cmd: python src/cnnClassifier/pipeline/stage_03_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 5f8547caf2112f616b4069186d9c87da
      size: 995
    - path: src/cnnClassifier/pipeline/stage_03_prepare_base_model.py
      hash: md5
      md5: 5e5a3a9e839f672e7eb6b3b8c4a329b9
      size: 877
    params:
      params.yaml:
        CLASSES: 10
        IMAGE_SIZE:
        - 216
        - 13
        - 1
        LEARNING_RATE: 0.01
    outs:
    - path: artifacts/prepare_base_model/model.h5
      hash: md5
      md5: 889eafd4f3a3a96b7429d1a49f76c1b0
      size: 564368
  training:
    cmd: python src/cnnClassifier/pipeline/stage_04_train_model.py
    deps:
    - path: artifacts/prepare_base_model/model.h5
      hash: md5
      md5: 889eafd4f3a3a96b7429d1a49f76c1b0
      size: 564368
    - path: artifacts/prepare_data/test_data.json
      hash: md5
      md5: f7dacf7dcfe734fbad8a13927d8464fb
      size: 35931752
    - path: artifacts/prepare_data/train_data.json
      hash: md5
      md5: 8aca6d80038a78ae306fdcda86f46492
      size: 162804174
    - path: artifacts/prepare_data/val_data.json
      hash: md5
      md5: 7f86b0c558d92359639ce2569090a626
      size: 40730053
    - path: config/config.yaml
      hash: md5
      md5: 5f8547caf2112f616b4069186d9c87da
      size: 995
    - path: src/cnnClassifier/components/prepare_callbacks.py
      hash: md5
      md5: 91eff75ec748ccbe0e10234abc5dc322
      size: 943
    - path: src/cnnClassifier/pipeline/stage_04_train_model.py
      hash: md5
      md5: 86f28e02f6e882c1c127df6e438b7399
      size: 1334
    params:
      params.yaml:
        BATCH_SIZE: 32
        EPOCHS: 150
        IMAGE_SIZE:
        - 216
        - 13
        - 1
        SHUFFLE: true
    outs:
    - path: artifacts/model_training/model.h5
      hash: md5
      md5: fb132958e68815d5e359eaf9e23aece6
      size: 1093168
  evaluation:
    cmd: python src/cnnClassifier/pipeline/stage_05_evaluation.py
    deps:
    - path: artifacts/model_training/model.h5
      hash: md5
      md5: fb132958e68815d5e359eaf9e23aece6
      size: 1093168
    - path: artifacts/prepare_data/test_data.json
      hash: md5
      md5: f7dacf7dcfe734fbad8a13927d8464fb
      size: 35931752
    - path: config/config.yaml
      hash: md5
      md5: 5f8547caf2112f616b4069186d9c87da
      size: 995
    - path: src/cnnClassifier/pipeline/stage_05_evaluation.py
      hash: md5
      md5: d546151df787108a77ef80b50e9d11cd
      size: 1036
    params:
      params.yaml:
        BATCH_SIZE: 32
        IMAGE_SIZE:
        - 216
        - 13
        - 1
    outs:
    - path: scores.json
      hash: md5
      md5: 40e6c88f2754188aa3cacaa1ec5af4cb
      size: 69
